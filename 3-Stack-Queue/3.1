
// Fixed division

[0, n/3)
[n/3, 2n/3)
[2n/3, n)

public class MultiStack<T>{
  public T[] data;
  public int[] top = new int[3];
  public int[] length = new int[3];
  
  public MultiStack(int arraySize){
    this.data = (new T[]) new Object[arraySize];
    top = {-1, -1, -1};
    length = {0, 0, 0};
  }
  
  public T pop(int stackNum){
    // Empty stack
    int index = top[stackNum-1];
    if(index == -1)
      throw new StackEmptyException();
    
    // Remove top element - update length & top & data
    T item = data[index];
    data[index] = null;
    int length = length[stackNum-1];
    length--;
    if(length == 0)
      top = -1;
    top = top-1;
    
    return item;
  }
  
  public T peek(int stackNum){
    int index = top[stackNum-1];
    
    // Empty stack
    if(index == -1)
      throw new StackEmptyException();
    
    T item = data[index];
    return item;
  }
  
  public void push(int stackNum, T item){
    int length = length[stackNum-1];
    
    // Full stack
    if(length == data.length/3)
      throw StackFullException();
    
    // Add element and update top, data & length
    int index = top[stackNum-1];
    if(index == -1) {
      index = ((stackNum-1) * data.length) / 3;
    }
    else {
      index++;
    }
    data[index] = item;
    top[stackNum-1] = index;
    length[stackNum-1] = length + 1;
  }
  
  public boolean isEmpty(int stackNum){
    return top[stackNum-1] == -1;
  }
}
